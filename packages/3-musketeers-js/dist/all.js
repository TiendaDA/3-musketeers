(()=>{var tn=Object.defineProperty;var Yt=(t,e)=>{for(var r in e)tn(t,r,{get:e[r],enumerable:!0})};var Xt=!1;function Ht(t){Xt=t}var K={info:(...t)=>ot(1,...t),warn:(...t)=>ot(2,...t),error:(...t)=>ot(3,...t)};function ot(t,...e){if(Xt){let r=["\u{1F93A} %c[3-musketeers]"];switch(t){case 1:r.push("color: #06989A; font-weight: 600"),console.log(...r,...e);break;case 2:r.push("color: #C4A000; font-weight: 600"),console.warn(...r,...e);break;case 3:r.push("color: #CC0000; font-weight: 600"),console.error(...r,...e);break;default:break}}}var rn=/\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)]/;function Pe(t){if(t==null)return String(t);let e=rn.exec(Object.prototype.toString.call(Object(t)));return e?e[1].toLowerCase():"object"}function xe(t){return Pe(t)==="array"}function zt(t){return Pe(t)==="string"}function Te(t,e){return Object.prototype.hasOwnProperty.call(Object(t),e)}function Se(t){if(!t||Pe(t)!="object"||t.nodeType||t==t.window)return!1;try{if(t.constructor&&!Te(t,"constructor")&&!Te(t.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}let e;for(e in t);return e===void 0||Te(t,e)}function Zt(t){return Pe(t)==="arguments"}function ce(t,e){let r=!t._clear;for(let n in t)if(Te(t,n)){let i=t[n];xe(i)&&r?(xe(e[n])||(e[n]=[]),ce(i,e[n])):Se(i)&&r?(Se(e[n])||(e[n]={}),ce(i,e[n])):e[n]=i}delete e._clear}function at(t,e){let r={},n=r,i=t.split(".");for(let o=0;o<i.length-1;o++)n=n[i[o]]={};return n[i[i.length-1]]=e,r}function Jt(t,e={}){let{async:r}=e,n=document.createElement("script");n.async=!!r,n.setAttribute("src",t),document.body.appendChild(n)}function nn(t){return{set:(e,r)=>{ce(at(e,r),t.model_)},get:e=>t.get(e)}}function on(t,e){zt(t[0])||K.warn(`Error processing command, no command was run. The first argument must be of type string, but was of type ${typeof t[0]}.
The command run was ${t}`);let r=t[0].split("."),n=r.pop(),i=t.slice(1),o=e;for(let a=0;a<r.length;a++){if(o[r[a]]===void 0){K.warn(`Error processing command, no command was run as the object at ${r} was undefined.
The command run was ${t}`);return}o=o[r[a]]}try{o[n](...i)}catch{K.error(`An exception was thrown by the method ${n}, so no command was run.
The method was called on the data layer object at the location ${r}.`)}}var ke=class{constructor(e,r={}){this.dataLayer_=e,this.listener_=r.listener||(()=>{}),this.listenToPast_=!!r.listenToPast,this.processed_=!1,this.executingListener_=!1,this.model_={},this.unprocessed_=[],this.abstractModelInterface_=nn(this),r.debugMode&&Ht(!0);let n=this.dataLayer_.push;this.dataLayer_.push=(...i)=>{let o=[].slice.call(i,0),a=n.apply(this.dataLayer_,o);return this.processStates_(o),a},r.processNow&&this.process()}process(){this.processed_&&K.error("Process has already been run. This method should only run a single time to prepare the helper."),this.processed_=!0;let e=this.dataLayer_.length;for(let r=0;r<e;r++)this.processStates_([this.dataLayer_[r]],!this.listenToPast_)}get(e){let r=this.model_,n=e.split(".");for(let i=0;i<n.length;i++){if(r[n[i]]===void 0)return;r=r[n[i]]}return r}processStates_(e,r=!1){if(this.processed_&&(this.unprocessed_.push(...e),!this.executingListener_))for(;this.unprocessed_.length>0;){let n=this.unprocessed_.shift();if(xe(n))on(n,this.model_);else if(!Zt(n))if(typeof n=="function")try{n.call(this.abstractModelInterface_)}catch(i){K.error(`An exception was thrown when running the method ${n}, execution was skipped.`,i)}else if(Se(n))for(let i in n)ce(at(i,n[i]),this.model_);else continue;r||(this.executingListener_=!0,this.listener_(this.model_,n),this.executingListener_=!1)}}};function er(t,e){t.forEach(r=>{let[n,i]=e;r.pageView(n,i)})}function tr(t,e){t.forEach(r=>{let[n,i,o]=e;r.track(n,i,o)})}function rr(t,e){t.forEach(r=>{let[n,i]=e;r.identify(n,i)})}var Ae=class{constructor(e=[]){this.listener=(e,r)=>{let n=[...r].splice(0,r.length);switch(n.shift()){case"init":let o=n.shift(),a=this.getProviderInstance(o);if(!a){K.error(`Provider '${o}' not found`);return}this.providers.push(a),a.init(...n);break;case"track":tr(this.providers,n);break;case"page":er(this.providers,n);break;case"identify":rr(this.providers,n);break}};this.availableProviders=e,this.providers=[];let r=window.dataQueue||[];this.helper=new ke(r,{listener:this.listener,listenToPast:!0,processNow:!0,debugMode:!0})}getProviderInstance(e){let r=this.availableProviders.find(n=>n.providerName===e);if(r)return new r}};var V=class{static{this.providerName="provider"}static logAction(e,...r){K.info(`[${e}]`,...r)}saveOptions(e={}){e.mapTrackEventName&&(this.mapTrackEventName=e.mapTrackEventName)}getTrackEventName(e){return this.mapTrackEventName?this.mapTrackEventName(e):e}};var Re=class t extends V{static{this.providerName="google-analytics"}init(r,n={}){V.logAction("INIT",`[${t.providerName}]`,r),this.saveOptions(n),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config","G-JJYRJMRN07"),Jt(`https://www.googletagmanager.com/gtag/js?id=${r}`)}ready(){return!!window.gtag}pageView(r,n){V.logAction("PAGE",`[${t.providerName}]`,r,n),window.gtag("event","page_view",{page_title:r,...n})}track(r,n,i){let o=this.getTrackEventName(r);V.logAction("TRACK",`[${t.providerName}]`,o,n),window.gtag("event",o,n),typeof i=="function"&&i()}identify(r,n){V.logAction("IDENTIFY",`[${t.providerName}]`,r,n),window.gtag("set","user_id",r),window.gtag("set","user_properties",n)}};var Qt={};Yt(Qt,{Identify:()=>G,Revenue:()=>le,Types:()=>ut,add:()=>Gt,createInstance:()=>Bt,extendSession:()=>kn,flush:()=>An,getDeviceId:()=>Rn,getSessionId:()=>Dn,getUserId:()=>Ln,groupIdentify:()=>On,identify:()=>$t,init:()=>We,logEvent:()=>Cn,remove:()=>Nn,reset:()=>Un,revenue:()=>Mn,runQueuedFunctions:()=>kr,setDeviceId:()=>Fn,setGroup:()=>Vn,setOptOut:()=>jn,setSessionId:()=>qn,setTransport:()=>Bn,setUserId:()=>Kt,track:()=>Wt});var st=function(t,e){return st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},st(t,e)};function j(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");st(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var v=function(){return v=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},v.apply(this,arguments)};function de(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function l(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function c(s){try{u(n.next(s))}catch(f){a(f)}}function d(s){try{u(n.throw(s))}catch(f){a(f)}}function u(s){s.done?o(s.value):i(s.value).then(c,d)}u((n=n.apply(t,e||[])).next())})}function p(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(s){return d([u,s])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(s){u=[6,s],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function W(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function x(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function B(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var ut={};Yt(ut,{IdentifyOperation:()=>P,LogLevel:()=>L,RevenueProperty:()=>Q,ServerZone:()=>De,SpecialEventType:()=>X,Status:()=>T});var P;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(P||(P={}));var Q;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE="$revenue"})(Q||(Q={}));var X;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(X||(X={}));var L;(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(L||(L={}));var De;(function(t){t.US="US",t.EU="EU"})(De||(De={}));var T;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(T||(T={}));var ct="-",ne="AMP",nr="".concat(ne,"_unsent"),dt="https://api2.amplitude.com/2/httpapi",ir="https://api.eu.amplitude.com/2/httpapi",or="https://api2.amplitude.com/batch",ar="https://api.eu.amplitude.com/batch";var an=1e3,Le=function(t){if(Object.keys(t).length>an)return!1;for(var e in t){var r=t[e];if(!ft(e,r))return!1}return!0},ft=function(t,e){var r,n;if(typeof t!="string")return!1;if(Array.isArray(e)){var i=!0;try{for(var o=W(e),a=o.next();!a.done;a=o.next()){var c=a.value;if(Array.isArray(c))return!1;if(typeof c=="object")i=i&&Le(c);else if(!["number","string"].includes(typeof c))return!1;if(!i)return!1}}catch(d){r={error:d}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}else{if(e==null)return!1;if(typeof e=="object")return Le(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0};var G=function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return v({},this._properties)},t.prototype.set=function(e,r){return this._safeSet(P.SET,e,r),this},t.prototype.setOnce=function(e,r){return this._safeSet(P.SET_ONCE,e,r),this},t.prototype.append=function(e,r){return this._safeSet(P.APPEND,e,r),this},t.prototype.prepend=function(e,r){return this._safeSet(P.PREPEND,e,r),this},t.prototype.postInsert=function(e,r){return this._safeSet(P.POSTINSERT,e,r),this},t.prototype.preInsert=function(e,r){return this._safeSet(P.PREINSERT,e,r),this},t.prototype.remove=function(e,r){return this._safeSet(P.REMOVE,e,r),this},t.prototype.add=function(e,r){return this._safeSet(P.ADD,e,r),this},t.prototype.unset=function(e){return this._safeSet(P.UNSET,e,ct),this},t.prototype.clearAll=function(){return this._properties={},this._properties[P.CLEAR_ALL]=ct,this},t.prototype._safeSet=function(e,r,n){if(this._validate(e,r,n)){var i=this._properties[e];return i===void 0&&(i={},this._properties[e]=i),i[r]=n,this._propertySet.add(r),!0}return!1},t.prototype._validate=function(e,r,n){return this._properties[P.CLEAR_ALL]!==void 0||this._propertySet.has(r)?!1:e===P.ADD?typeof n=="number":e!==P.UNSET&&e!==P.REMOVE?ft(r,n):!0},t}();var sr=function(t,e,r){var n=typeof t=="string"?{event_type:t}:t;return v(v(v({},n),r),e&&{event_properties:e})},fe=function(t,e){var r=v(v({},e),{event_type:X.IDENTIFY,user_properties:t.getUserProperties()});return r},ur=function(t,e,r,n){var i,o=v(v({},n),{event_type:X.GROUP_IDENTIFY,group_properties:r.getUserProperties(),groups:(i={},i[t]=e,i)});return o},cr=function(t,e,r){var n,i=new G;i.set(t,e);var o=v(v({},r),{event_type:X.IDENTIFY,user_properties:i.getUserProperties(),groups:(n={},n[t]=e,n)});return o},dr=function(t,e){return v(v({},e),{event_type:X.REVENUE,event_properties:t.getEventProperties()})};var Z=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=T.Unknown),{event:t,code:e,message:r}};var Y=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Y)};var fr=function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,r){var n,i,o;return l(this,void 0,void 0,function(){return p(this,function(a){switch(a.label){case 0:return e.name=(n=e.name)!==null&&n!==void 0?n:Y(),e.type=(i=e.type)!==null&&i!==void 0?i:"enrichment",[4,(o=e.setup)===null||o===void 0?void 0:o.call(e,r,this.client)];case 1:return a.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e){var r;return l(this,void 0,void 0,function(){var n,i;return p(this,function(o){switch(o.label){case 0:return n=this.plugins.findIndex(function(a){return a.name===e}),i=this.plugins[n],this.plugins.splice(n,1),[4,(r=i.teardown)===null||r===void 0?void 0:r.call(i)];case 1:return o.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var r=this.plugins;r.map(function(n){var i;return(i=n.teardown)===null||i===void 0?void 0:i.call(n)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var r=this;return new Promise(function(n){r.queue.push([e,n]),r.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var r=this;this.applying||(this.applying=!0,setTimeout(function(){r.apply(r.queue.shift()).then(function(){r.applying=!1,r.queue.length>0&&r.scheduleApply(0)})},e))},t.prototype.apply=function(e){return l(this,void 0,void 0,function(){var r,n,i,o,a,c,d,y,m,u,s,f,h,y,m,E,g,b,O,I,U,F;return p(this,function(w){switch(w.label){case 0:if(!e)return[2];r=x(e,1),n=r[0],i=x(e,2),o=i[1],a=this.plugins.filter(function(S){return S.type==="before"}),w.label=1;case 1:w.trys.push([1,6,7,8]),c=W(a),d=c.next(),w.label=2;case 2:return d.done?[3,5]:(y=d.value,y.execute?[4,y.execute(v({},n))]:[3,4]);case 3:if(m=w.sent(),m===null)return o({event:n,code:0,message:""}),[2];n=m,w.label=4;case 4:return d=c.next(),[3,2];case 5:return[3,8];case 6:return u=w.sent(),O={error:u},[3,8];case 7:try{d&&!d.done&&(I=c.return)&&I.call(c)}finally{if(O)throw O.error}return[7];case 8:s=this.plugins.filter(function(S){return S.type==="enrichment"||S.type===void 0}),w.label=9;case 9:w.trys.push([9,14,15,16]),f=W(s),h=f.next(),w.label=10;case 10:return h.done?[3,13]:(y=h.value,y.execute?[4,y.execute(v({},n))]:[3,12]);case 11:if(m=w.sent(),m===null)return o({event:n,code:0,message:""}),[2];n=m,w.label=12;case 12:return h=f.next(),[3,10];case 13:return[3,16];case 14:return E=w.sent(),U={error:E},[3,16];case 15:try{h&&!h.done&&(F=f.return)&&F.call(f)}finally{if(U)throw U.error}return[7];case 16:return g=this.plugins.filter(function(S){return S.type==="destination"}),b=g.map(function(S){var N=v({},n);return S.execute(N).catch(function(C){return Z(N,0,String(C))})}),Promise.all(b).then(function(S){var N=x(S,1),C=N[0];o(C)}),[2]}})})},t.prototype.flush=function(){return l(this,void 0,void 0,function(){var e,r,n,i=this;return p(this,function(o){switch(o.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(a){return i.apply(a)}))];case 1:return o.sent(),r=this.plugins.filter(function(a){return a.type==="destination"}),n=r.map(function(a){return a.flush&&a.flush()}),[4,Promise.all(n)];case 2:return o.sent(),[2]}})})},t}();var lr="Event tracked successfully",pr="Unexpected error occurred",vr="Event rejected due to exceeded retry count",hr="Event skipped due to optOut config",gr="Event rejected due to missing API key",mr="Invalid API key",yr="Client not initialized";var q=function(t){return{promise:t||Promise.resolve()}};var lt=function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new fr(this),this.name=e}return t.prototype._init=function(e){return l(this,void 0,void 0,function(){return p(this,function(r){switch(r.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return r.sent(),[2]}})})},t.prototype.runQueuedFunctions=function(e){return l(this,void 0,void 0,function(){var r,n,i,o,a,c,d;return p(this,function(u){switch(u.label){case 0:r=this[e],this[e]=[],u.label=1;case 1:u.trys.push([1,6,7,8]),n=W(r),i=n.next(),u.label=2;case 2:return i.done?[3,5]:(o=i.value,[4,o()]);case 3:u.sent(),u.label=4;case 4:return i=n.next(),[3,2];case 5:return[3,8];case 6:return a=u.sent(),c={error:a},[3,8];case 7:try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(c)throw c.error}return[7];case 8:return[2]}})})},t.prototype.track=function(e,r,n){var i=sr(e,r,n);return q(this.dispatch(i))},t.prototype.identify=function(e,r){var n=fe(e,r);return q(this.dispatch(n))},t.prototype.groupIdentify=function(e,r,n,i){var o=ur(e,r,n,i);return q(this.dispatch(o))},t.prototype.setGroup=function(e,r,n){var i=cr(e,r,n);return q(this.dispatch(i))},t.prototype.revenue=function(e,r){var n=dr(e,r);return q(this.dispatch(n))},t.prototype.add=function(e){return this.config?q(this.timeline.register(e,this.config)):(this.q.push(this.add.bind(this,e)),q())},t.prototype.remove=function(e){return this.config?q(this.timeline.deregister(e)):(this.q.push(this.remove.bind(this,e)),q())},t.prototype.dispatchWithCallback=function(e,r){if(!this.config)return r(Z(e,0,yr));this.process(e).then(r)},t.prototype.dispatch=function(e){return l(this,void 0,void 0,function(){var r=this;return p(this,function(n){return this.config?[2,this.process(e)]:[2,new Promise(function(i){r.dispatchQ.push(r.dispatchWithCallback.bind(r,e,i))})]})})},t.prototype.process=function(e){return l(this,void 0,void 0,function(){var i,r,n,i;return p(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.config.optOut?[2,Z(e,0,hr)]:[4,this.timeline.push(e)];case 1:return i=o.sent(),i.code===200?this.config.loggerProvider.log(i.message):this.config.loggerProvider.error(i.message),[2,i];case 2:return r=o.sent(),n=String(r),this.config.loggerProvider.error(n),i=Z(e,0,n),[2,i];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.config){this.q.push(this.setOptOut.bind(this,!!e));return}this.config.optOut=!!e},t.prototype.flush=function(){return q(this.timeline.flush())},t}();var le=function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setEventProperties=function(e){return Le(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?v({},this.properties):{};return e[Q.REVENUE_PRODUCT_ID]=this.productId,e[Q.REVENUE_QUANTITY]=this.quantity,e[Q.REVENUE_PRICE]=this.price,e[Q.REVENUE_TYPE]=this.revenueType,e[Q.REVENUE]=this.revenue,e},t}();var _r=function(t,e){var r=Math.max(e,1);return t.reduce(function(n,i,o){var a=Math.floor(o/r);return n[a]||(n[a]=[]),n[a].push(i),n},[])};var Oe="Amplitude Logger ",pe=function(){function t(){this.logLevel=L.None}return t.prototype.disable=function(){this.logLevel=L.None},t.prototype.enable=function(e){e===void 0&&(e=L.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<L.Verbose||console.log("".concat(Oe,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<L.Warn||console.warn("".concat(Oe,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<L.Error||console.error("".concat(Oe,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<L.Debug||console.log("".concat(Oe,"[Debug]: ").concat(e.join(" ")))},t}();var Ce=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:L.Warn,loggerProvider:new pe,optOut:!1,serverUrl:dt,serverZone:"US",useBatch:!1}},pt=function(){function t(e){var r,n,i,o;this._optOut=!1;var a=Ce();this.apiKey=e.apiKey,this.flushIntervalMillis=(r=e.flushIntervalMillis)!==null&&r!==void 0?r:a.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||a.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||a.flushQueueSize,this.instanceName=e.instanceName||a.instanceName,this.loggerProvider=e.loggerProvider||a.loggerProvider,this.logLevel=(n=e.logLevel)!==null&&n!==void 0?n:a.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:a.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||a.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(o=e.useBatch)!==null&&o!==void 0?o:a.useBatch,this.loggerProvider.enable(this.logLevel);var c=vt(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=c.serverZone,this.serverUrl=c.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t}();var sn=function(t,e){return t==="EU"?e?ar:ir:e?or:dt},vt=function(t,e,r){if(t===void 0&&(t=""),e===void 0&&(e=Ce().serverZone),r===void 0&&(r=Ce().useBatch),t)return{serverUrl:t,serverZone:void 0};var n=["US","EU"].includes(e)?e:Ce().serverZone;return{serverZone:n,serverUrl:sn(n,r)}};function un(t){return t instanceof Error?t.message:String(t)}function Ne(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}var ht=function(){function t(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return t.prototype.setup=function(e){var r;return l(this,void 0,void 0,function(){var n,i=this;return p(this,function(o){switch(o.label){case 0:return this.config=e,this.storageKey="".concat(nr,"_").concat(this.config.apiKey.substring(0,10)),[4,(r=this.config.storageProvider)===null||r===void 0?void 0:r.get(this.storageKey)];case 1:return n=o.sent(),this.saveEvents(),n&&n.length>0&&Promise.all(n.map(function(a){return i.execute(a)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var r=this;return new Promise(function(n){var i={event:e,attempts:0,callback:function(o){return n(o)},timeout:0};r.addToQueue(i)})},t.prototype.addToQueue=function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r.filter(function(o){return o.attempts<e.config.flushMaxRetries?(o.attempts+=1,!0):(e.fulfillRequest([o],500,vr),!1)});i.forEach(function(o){if(e.queue=e.queue.concat(o),o.timeout===0){e.schedule(e.config.flushIntervalMillis);return}setTimeout(function(){o.timeout=0,e.schedule(0)},o.timeout)}),this.saveEvents()},t.prototype.schedule=function(e){var r=this;this.scheduled||(this.scheduled=setTimeout(function(){r.flush(!0).then(function(){r.queue.length>0&&r.schedule(e)})},e))},t.prototype.flush=function(e){return e===void 0&&(e=!1),l(this,void 0,void 0,function(){var r,n,i,o=this;return p(this,function(a){switch(a.label){case 0:return r=[],n=[],this.queue.forEach(function(c){return c.timeout===0?r.push(c):n.push(c)}),this.queue=n,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),i=_r(r,this.config.flushQueueSize),[4,Promise.all(i.map(function(c){return o.send(c,e)}))];case 1:return a.sent(),[2]}})})},t.prototype.send=function(e,r){return r===void 0&&(r=!0),l(this,void 0,void 0,function(){var n,i,o,a,c;return p(this,function(d){switch(d.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,gr)];n={api_key:this.config.apiKey,events:e.map(function(u){var s=u.event,f=s.extra,h=de(s,["extra"]);return h}),options:{min_id_length:this.config.minIdLength}},d.label=1;case 1:return d.trys.push([1,3,,4]),i=vt(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(i,n)];case 2:return o=d.sent(),o===null?(this.fulfillRequest(e,0,pr),[2]):r?(this.handleResponse(o,e),[3,4]):("body"in o?this.fulfillRequest(e,o.statusCode,"".concat(o.status,": ").concat(Ne(o))):this.fulfillRequest(e,o.statusCode,o.status),[2]);case 3:return a=d.sent(),c=un(a),this.config.loggerProvider.error(c),this.fulfillRequest(e,0,c),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,r){var n=e.status;switch(n){case T.Success:{this.handleSuccessResponse(e,r);break}case T.Invalid:{this.handleInvalidResponse(e,r);break}case T.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,r);break}case T.RateLimit:{this.handleRateLimitResponse(e,r);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(n,"' provided for ").concat(r.length,' events"}')),this.handleOtherResponse(r);break}}},t.prototype.handleSuccessResponse=function(e,r){this.fulfillRequest(r,e.statusCode,lr)},t.prototype.handleInvalidResponse=function(e,r){var n=this;if(e.body.missingField||e.body.error.startsWith(mr)){this.fulfillRequest(r,e.statusCode,e.body.error);return}var i=B(B(B(B([],x(Object.values(e.body.eventsWithInvalidFields)),!1),x(Object.values(e.body.eventsWithMissingFields)),!1),x(Object.values(e.body.eventsWithInvalidIdLengths)),!1),x(e.body.silencedEvents),!1).flat(),o=new Set(i),a=r.filter(function(c,d){if(o.has(d)){n.fulfillRequest([c],e.statusCode,e.body.error);return}return!0});a.length>0&&this.config.loggerProvider.warn(Ne(e)),this.addToQueue.apply(this,B([],x(a),!1))},t.prototype.handlePayloadTooLargeResponse=function(e,r){if(r.length===1){this.fulfillRequest(r,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(Ne(e)),this.config.flushQueueSize/=2,this.addToQueue.apply(this,B([],x(r),!1))},t.prototype.handleRateLimitResponse=function(e,r){var n=this,i=Object.keys(e.body.exceededDailyQuotaUsers),o=Object.keys(e.body.exceededDailyQuotaDevices),a=e.body.throttledEvents,c=new Set(i),d=new Set(o),u=new Set(a),s=r.filter(function(f,h){if(f.event.user_id&&c.has(f.event.user_id)||f.event.device_id&&d.has(f.event.device_id)){n.fulfillRequest([f],e.statusCode,e.body.error);return}return u.has(h)&&(f.timeout=n.throttleTimeout),!0});s.length>0&&this.config.loggerProvider.warn(Ne(e)),this.addToQueue.apply(this,B([],x(s),!1))},t.prototype.handleOtherResponse=function(e){var r=this;this.addToQueue.apply(this,B([],x(e.map(function(n){return n.timeout=n.attempts*r.retryTimeout,n})),!1))},t.prototype.fulfillRequest=function(e,r,n){this.saveEvents(),e.forEach(function(i){return i.callback(Z(i.event,r,n))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=Array.from(this.queue.map(function(r){return r.event}));this.config.storageProvider.set(this.storageKey,e)}},t}();var cn=function(t){t===void 0&&(t=0);var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(r){return r.trim()})},k=function(t){return function(){var e=v({},t.config),r=e.loggerProvider,n=e.logLevel;return{logger:r,logLevel:n}}},dn=function(t,e){var r,n;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var i=W(e.split(".")),o=i.next();!o.done;o=i.next()){var a=o.value;if(a in t)t=t[a];else return}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return t},A=function(t,e){return function(){var r,n,i={};try{for(var o=W(e),a=o.next();!a.done;a=o.next()){var c=a.value;i[c]=dn(t,c)}}catch(d){r={error:d}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}},R=function(t,e,r,n,i){return i===void 0&&(i=null),function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var c=r(),d=c.logger,u=c.logLevel;if(u&&u<L.Debug||!u||!d)return t.apply(i,o);var s={type:"invoke public method",name:e,args:o,stacktrace:cn(1),time:{start:new Date().toISOString()},states:{}};n&&s.states&&(s.states.before=n());var f=t.apply(i,o);return f&&f.promise?f.promise.then(function(){n&&s.states&&(s.states.after=n()),s.time&&(s.time.end=new Date().toISOString()),d.debug(JSON.stringify(s,null,2))}):(n&&s.states&&(s.states.after=n()),s.time&&(s.time.end=new Date().toISOString()),d.debug(JSON.stringify(s,null,2))),f}};var Ue=function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return l(this,void 0,void 0,function(){return p(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return l(this,void 0,void 0,function(){return p(this,function(r){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return l(this,void 0,void 0,function(){var r;return p(this,function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return r=n.sent(),[2,r?JSON.stringify(r):void 0]}})})},t.prototype.set=function(e,r){return l(this,void 0,void 0,function(){return p(this,function(n){return this.memoryStorage.set(e,r),[2]})})},t.prototype.remove=function(e){return l(this,void 0,void 0,function(){return p(this,function(r){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return l(this,void 0,void 0,function(){return p(this,function(e){return this.memoryStorage.clear(),[2]})})},t}();var ie=function(){function t(){}return t.prototype.send=function(e,r){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var r,n,i,o,a,c,d,u,s,f,h,y,m,E,g,b,O,I,U,F,w,S;if(typeof e!="object")return null;var N=e.code||0,C=this.buildStatus(N);switch(C){case T.Success:return{status:C,statusCode:N,body:{eventsIngested:(r=e.events_ingested)!==null&&r!==void 0?r:0,payloadSizeBytes:(n=e.payload_size_bytes)!==null&&n!==void 0?n:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case T.Invalid:return{status:C,statusCode:N,body:{error:(o=e.error)!==null&&o!==void 0?o:"",missingField:(a=e.missing_field)!==null&&a!==void 0?a:"",eventsWithInvalidFields:(c=e.events_with_invalid_fields)!==null&&c!==void 0?c:{},eventsWithMissingFields:(d=e.events_with_missing_fields)!==null&&d!==void 0?d:{},eventsWithInvalidIdLengths:(u=e.events_with_invalid_id_lengths)!==null&&u!==void 0?u:{},epsThreshold:(s=e.eps_threshold)!==null&&s!==void 0?s:0,exceededDailyQuotaDevices:(f=e.exceeded_daily_quota_devices)!==null&&f!==void 0?f:{},silencedDevices:(h=e.silenced_devices)!==null&&h!==void 0?h:[],silencedEvents:(y=e.silenced_events)!==null&&y!==void 0?y:[],throttledDevices:(m=e.throttled_devices)!==null&&m!==void 0?m:{},throttledEvents:(E=e.throttled_events)!==null&&E!==void 0?E:[]}};case T.PayloadTooLarge:return{status:C,statusCode:N,body:{error:(g=e.error)!==null&&g!==void 0?g:""}};case T.RateLimit:return{status:C,statusCode:N,body:{error:(b=e.error)!==null&&b!==void 0?b:"",epsThreshold:(O=e.eps_threshold)!==null&&O!==void 0?O:0,throttledDevices:(I=e.throttled_devices)!==null&&I!==void 0?I:{},throttledUsers:(U=e.throttled_users)!==null&&U!==void 0?U:{},exceededDailyQuotaDevices:(F=e.exceeded_daily_quota_devices)!==null&&F!==void 0?F:{},exceededDailyQuotaUsers:(w=e.exceeded_daily_quota_users)!==null&&w!==void 0?w:{},throttledEvents:(S=e.throttled_events)!==null&&S!==void 0?S:[]}};case T.Timeout:default:return{status:C,statusCode:N}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?T.Success:e===429?T.RateLimit:e===413?T.PayloadTooLarge:e===408?T.Timeout:e>=400&&e<500?T.Invalid:e>=500?T.Failed:T.Unknown},t}();var M=function(){if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global};var se=function(){var t,e=M();if(!(!((t=e?.location)===null||t===void 0)&&t.search))return{};var r=e.location.search.substring(1).split("&").filter(Boolean),n=r.reduce(function(i,o){var a=o.split("=",2),c=Er(a[0]),d=Er(a[1]);return d&&(i[c]=d),i},{});return n},Er=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}};var br="utm_campaign",Ir="utm_content",wr="utm_id",Tr="utm_medium",xr="utm_source",Sr="utm_term",gt="dclid",mt="fbclid",yt="gbraid",_t="gclid",Et="ko_click_id",bt="li_fat_id",It="msclkid",wt="rtd_cid",Tt="ttclid",xt="twclid",St="wbraid";var oe={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0};var ve=function(){function t(){}return t.prototype.parse=function(){return l(this,void 0,void 0,function(){return p(this,function(e){return[2,v(v(v(v({},oe),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=se(),r=e[br],n=e[Ir],i=e[wr],o=e[Tr],a=e[xr],c=e[Sr];return{utm_campaign:r,utm_content:n,utm_id:i,utm_medium:o,utm_source:a,utm_term:c}},t.prototype.getReferrer=function(){var e,r,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=(r=(e=n.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&r!==void 0?r:void 0}catch{}return n},t.prototype.getClickIds=function(){var e,r=se();return e={},e[gt]=r[gt],e[mt]=r[mt],e[yt]=r[yt],e[_t]=r[_t],e[Et]=r[Et],e[bt]=r[bt],e[It]=r[It],e[wt]=r[wt],e[Tt]=r[Tt],e[xt]=r[xt],e[St]=r[St],e},t}();var Me=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[ne,e,t.substring(0,r)].filter(Boolean).join("_")},Pt=function(t){return"".concat(ne.toLowerCase(),"_").concat(t.substring(0,6))};var he=function(){function t(e){this.options=v({},e)}return t.prototype.isEnabled=function(){return l(this,void 0,void 0,function(){var e,r,n,i;return p(this,function(o){switch(o.label){case 0:if(!M())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),r="AMP_TEST",o.label=1;case 1:return o.trys.push([1,4,5,7]),[4,e.set(r,t.testValue)];case 2:return o.sent(),[4,e.get(r)];case 3:return n=o.sent(),[2,n===t.testValue];case 4:return i=o.sent(),[2,!1];case 5:return[4,e.remove(r)];case 6:return o.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return l(this,void 0,void 0,function(){var r;return p(this,function(n){switch(n.label){case 0:return[4,this.getRaw(e)];case 1:if(r=n.sent(),!r)return[2,void 0];try{try{r=decodeURIComponent(atob(r))}catch{}return[2,JSON.parse(r)]}catch{return[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var r,n;return l(this,void 0,void 0,function(){var i,o,a;return p(this,function(c){return i=M(),o=(n=(r=i?.document)===null||r===void 0?void 0:r.cookie.split("; "))!==null&&n!==void 0?n:[],a=o.find(function(d){return d.indexOf(e+"=")===0}),a?[2,a.substring(e.length+1)]:[2,void 0]})})},t.prototype.set=function(e,r){var n;return l(this,void 0,void 0,function(){var i,o,a,c,d,u;return p(this,function(s){try{i=(n=this.options.expirationDays)!==null&&n!==void 0?n:0,o=r!==null?i:-1,a=void 0,o&&(c=new Date,c.setTime(c.getTime()+o*24*60*60*1e3),a=c),d="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(r)))),a&&(d+="; expires=".concat(a.toUTCString())),d+="; path=/",this.options.domain&&(d+="; domain=".concat(this.options.domain)),this.options.secure&&(d+="; Secure"),this.options.sameSite&&(d+="; SameSite=".concat(this.options.sameSite)),u=M(),u&&(u.document.cookie=d)}catch{}return[2]})})},t.prototype.remove=function(e){return l(this,void 0,void 0,function(){return p(this,function(r){switch(r.label){case 0:return[4,this.set(e,null)];case 1:return r.sent(),[2]}})})},t.prototype.reset=function(){return l(this,void 0,void 0,function(){return p(this,function(e){return[2]})})},t}();var kt=function(t){j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return l(this,void 0,void 0,function(){var i,o,a;return p(this,function(c){switch(c.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(n),method:"POST"},[4,fetch(r,i)];case 1:return o=c.sent(),[4,o.json()];case 2:return a=c.sent(),[2,this.buildResponse(a)]}})})},e}(ie);var fn=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:ln(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),ln=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},pn=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(r){e(r)}),this.queue=[])},t}(),J=function(){return J=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},J.apply(this,arguments)},Fe=function(t,e){var r=["string","number","boolean","undefined"],n=typeof t,i=typeof e;if(n!==i)return!1;for(var o=0,a=r;o<a.length;o++){var c=a[o];if(c===n)return t===e}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var d=Array.isArray(t),u=Array.isArray(e);if(d!==u)return!1;if(d&&u){for(var s=0;s<t.length;s++)if(!Fe(t[s],e[s]))return!1}else{var f=Object.keys(t).sort(),h=Object.keys(e).sort();if(!Fe(f,h))return!1;var y=!0;return Object.keys(t).forEach(function(m){Fe(t[m],e[m])||(y=!1)}),y}return!0},vn="$set",hn="$unset",gn="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),r=e.length,n=new Array(r);r--;)n[r]=[e[r],t[e[r]]];return n});var mn=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,r=J({},this.identity.userProperties),n=J(J({},this.identity),{userProperties:r});return{setUserId:function(i){return n.userId=i,this},setDeviceId:function(i){return n.deviceId=i,this},setUserProperties:function(i){return n.userProperties=i,this},updateUserProperties:function(i){for(var o=n.userProperties||{},a=0,c=Object.entries(i);a<c.length;a++){var d=c[a],u=d[0],s=d[1];switch(u){case vn:for(var f=0,h=Object.entries(s);f<h.length;f++){var y=h[f],m=y[0],E=y[1];o[m]=E}break;case hn:for(var g=0,b=Object.keys(s);g<b.length;g++){var m=b[g];delete o[m]}break;case gn:o={};break}}return n.userProperties=o,this},commit:function(){return e.setIdentity(n),this}}},t.prototype.getIdentity=function(){return J({},this.identity)},t.prototype.setIdentity=function(e){var r=J({},this.identity);this.identity=J({},e),Fe(r,this.identity)||this.listeners.forEach(function(n){n(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),ge=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,Pr=function(){function t(){this.identityStore=new mn,this.eventBridge=new pn,this.applicationContextProvider=new fn}return t.getInstance=function(e){return ge.analyticsConnectorInstances||(ge.analyticsConnectorInstances={}),ge.analyticsConnectorInstances[e]||(ge.analyticsConnectorInstances[e]=new t),ge.analyticsConnectorInstances[e]},t}();var ee=function(t){return t===void 0&&(t="$default_instance"),Pr.getInstance(t)},At=function(t,e){ee(e).identityStore.editIdentity().setUserId(t).commit()},Rt=function(t,e){ee(e).identityStore.editIdentity().setDeviceId(t).commit()};var Dt=function(){function t(){this.name="identity",this.type="before",this.identityStore=ee().identityStore}return t.prototype.execute=function(e){return l(this,void 0,void 0,function(){var r;return p(this,function(n){return r=e.user_properties,r&&this.identityStore.editIdentity().updateUserProperties(r).commit(),[2,e]})})},t.prototype.setup=function(e){return l(this,void 0,void 0,function(){return p(this,function(r){return e.instanceName&&(this.identityStore=ee(e.instanceName).identityStore),[2]})})},t}();var Lt=function(){var t,e,r,n;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(n=(r=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&r!==void 0?r:i)!==null&&n!==void 0?n:""};var me=function(t,e){return typeof t=="boolean"?t:t?.[e]!==!1},Ve=function(t){return me(t,"attribution")},ye=function(t){return me(t,"fileDownloads")},_e=function(t){return me(t,"formInteractions")},je=function(t){return me(t,"pageViews")},Ee=function(t){return me(t,"sessions")},Ot=function(t){var e=function(){return!1},r=void 0,n,i=je(t.defaultTracking);return i&&(e=void 0,n=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(r=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(n=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:r,eventType:n}},Ct=function(t){return Ve(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?v({},t.defaultTracking.attribution):{}};var kr=function(t,e){be(t,e)},be=function(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=n.name,o=n.args,a=n.resolve,c=t&&t[i];if(typeof c=="function"){var d=c.apply(t,o);typeof a=="function"&&a(d?.promise)}}return t},qe=function(t){var e=t;return e&&e._q!==void 0};var Ar="2.1.3";var yn="Web",_n="$remote",Rr=function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="amplitude-ts/".concat(Ar),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var r,n;return l(this,void 0,void 0,function(){var i,o,a,c;return p(this,function(d){return i=new Date().getTime(),o=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1,a=(n=e.event_id)!==null&&n!==void 0?n:o+1,this.config.lastEventId=a,e.time||(this.config.lastEventTime=i),c=v(v(v(v(v(v(v(v({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:yn}),this.config.trackingOptions.language&&{language:Lt()}),this.config.trackingOptions.ipAddress&&{ip:_n}),{insert_id:Y(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:a,library:this.library,user_agent:this.userAgent}),[2,c]})})},t}();var Be=function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return l(this,void 0,void 0,function(){var e,r,n,i,o;return p(this,function(a){switch(a.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),r=new t(this.storage),n="AMP_TEST",a.label=1;case 1:return a.trys.push([1,4,5,7]),[4,r.set(n,e)];case 2:return a.sent(),[4,r.get(n)];case 3:return i=a.sent(),[2,i===e];case 4:return o=a.sent(),[2,!1];case 5:return[4,r.remove(n)];case 6:return a.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return l(this,void 0,void 0,function(){var r,n;return p(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return r=i.sent(),r?[2,JSON.parse(r)]:[2,void 0];case 2:return n=i.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var r;return l(this,void 0,void 0,function(){return p(this,function(n){return[2,((r=this.storage)===null||r===void 0?void 0:r.getItem(e))||void 0]})})},t.prototype.set=function(e,r){var n;return l(this,void 0,void 0,function(){return p(this,function(i){try{(n=this.storage)===null||n===void 0||n.setItem(e,JSON.stringify(r))}catch{}return[2]})})},t.prototype.remove=function(e){var r;return l(this,void 0,void 0,function(){return p(this,function(n){try{(r=this.storage)===null||r===void 0||r.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return l(this,void 0,void 0,function(){return p(this,function(r){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t}();var Nt=function(t){j(e,t);function e(){var r;return t.call(this,(r=M())===null||r===void 0?void 0:r.localStorage)||this}return e}(Be);var Dr=function(t){j(e,t);function e(){var r;return t.call(this,(r=M())===null||r===void 0?void 0:r.sessionStorage)||this}return e}(Be);var Lr=function(t){j(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={done:4},r}return e.prototype.send=function(r,n){return l(this,void 0,void 0,function(){var i=this;return p(this,function(o){return[2,new Promise(function(a,c){typeof XMLHttpRequest>"u"&&c(new Error("XHRTransport is not supported."));var d=new XMLHttpRequest;d.open("POST",r,!0),d.onreadystatechange=function(){if(d.readyState===i.state.done)try{var u=d.responseText,s=JSON.parse(u),f=i.buildResponse(s);a(f)}catch(h){c(h)}},d.setRequestHeader("Content-Type","application/json"),d.setRequestHeader("Accept","*/*"),d.send(JSON.stringify(n))})]})})},e}(ie);var Or=function(t){j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return l(this,void 0,void 0,function(){var i=this;return p(this,function(o){return[2,new Promise(function(a,c){var d=M();if(!d?.navigator.sendBeacon)throw new Error("SendBeaconTransport is not supported");try{var u=JSON.stringify(n),s=d.navigator.sendBeacon(r,JSON.stringify(n));return a(s?i.buildResponse({code:200,events_ingested:n.events.length,payload_size_bytes:u.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(f){c(f)}})]})})},e}(ie);var Cr=function(t,e,r){return r===void 0&&(r=!0),l(void 0,void 0,void 0,function(){var n,i,o,a,c,d,u,s,f;return p(this,function(h){switch(h.label){case 0:return n=Pt(t),[4,e.getRaw(n)];case 1:return i=h.sent(),i?r?[4,e.remove(n)]:[3,3]:[2,{optOut:!1}];case 2:h.sent(),h.label=3;case 3:return o=x(i.split("."),6),a=o[0],c=o[1],d=o[2],u=o[3],s=o[4],f=o[5],[2,{deviceId:a,userId:En(c),sessionId:Ut(u),lastEventId:Ut(f),lastEventTime:Ut(s),optOut:!!d}]}})})},Ut=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},En=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}};var $="[Amplitude]",Ga="".concat($," Page Viewed"),Mt="".concat($," Form Started"),Nr="".concat($," Form Submitted"),Ur="".concat($," File Downloaded"),Ft="session_start",Vt="session_end",Mr="".concat($," File Extension"),Fr="".concat($," File Name"),Vr="".concat($," Link ID"),jr="".concat($," Link Text"),qr="".concat($," Link URL"),Ge="".concat($," Form ID"),$e="".concat($," Form Name"),Ke="".concat($," Form Destination"),Ie="cookie",Br="US";var bn=function(t){j(e,t);function e(r,n,i,o,a,c,d,u,s,f,h,y,m,E,g,b,O,I,U,F,w,S,N,C,H,te,z,re,ue){i===void 0&&(i=new Ue),o===void 0&&(o={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),a===void 0&&(a=!0),d===void 0&&(d=1e3),u===void 0&&(u=5),s===void 0&&(s=30),f===void 0&&(f=Ie),g===void 0&&(g=new pe),b===void 0&&(b=L.Warn),I===void 0&&(I=!1),w===void 0&&(w=""),S===void 0&&(S=Br),C===void 0&&(C=30*60*1e3),H===void 0&&(H=new Nt),te===void 0&&(te={ipAddress:!0,language:!0,platform:!0}),z===void 0&&(z="fetch"),re===void 0&&(re=!1);var _=t.call(this,{apiKey:r,storageProvider:H,transportProvider:jt(z)})||this;return _.apiKey=r,_.appVersion=n,_.cookieOptions=o,_.defaultTracking=a,_.flushIntervalMillis=d,_.flushMaxRetries=u,_.flushQueueSize=s,_.identityStorage=f,_.ingestionMetadata=h,_.instanceName=y,_.loggerProvider=g,_.logLevel=b,_.minIdLength=O,_.partnerId=U,_.plan=F,_.serverUrl=w,_.serverZone=S,_.sessionTimeout=C,_.storageProvider=H,_.trackingOptions=te,_.transport=z,_.useBatch=re,_._optOut=!1,_._cookieStorage=i,_.deviceId=c,_.lastEventId=m,_.lastEventTime=E,_.optOut=I,_.sessionId=N,_.userId=ue,_.loggerProvider.enable(_.logLevel),_}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(r){this._cookieStorage!==r&&(this._cookieStorage=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(r){this._deviceId!==r&&(this._deviceId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(r){this._userId!==r&&(this._userId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(r){this._sessionId!==r&&(this._sessionId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(r){this._optOut!==r&&(this._optOut=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(r){this._lastEventTime!==r&&(this._lastEventTime=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(r){this._lastEventId!==r&&(this._lastEventId=r,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var r={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId};this.cookieStorage.set(Me(this.apiKey),r)},e}(pt);var Gr=function(t,e,r){return e===void 0&&(e={}),l(void 0,void 0,void 0,function(){var n,i,o,a,c,d,u,s,f,h,y,m,E,g,b,O,I,U,F,w,S,N,C,H,te,z,re,ue,_,Ye,Xe,He,ze,Ze,Je,et,tt,rt,nt,it;return p(this,function(ae){switch(ae.label){case 0:return n=e.identityStorage||Ie,o=[v({},e.cookieOptions)],I={},n===Ie?[3,1]:(a="",[3,5]);case 1:return(F=(U=e.cookieOptions)===null||U===void 0?void 0:U.domain)!==null&&F!==void 0?(c=F,[3,4]):[3,2];case 2:return[4,wn()];case 3:c=ae.sent(),ae.label=4;case 4:a=c,ae.label=5;case 5:return i=v.apply(void 0,o.concat([(I.domain=a,I.expiration=365,I.sameSite="Lax",I.secure=!1,I.upgrade=!0,I)])),d=In(e.identityStorage,i),[4,Cr(t,d,(S=(w=e.cookieOptions)===null||w===void 0?void 0:w.upgrade)!==null&&S!==void 0?S:!0)];case 6:return u=ae.sent(),[4,d.get(Me(t))];case 7:return s=ae.sent(),f=se(),h=(te=(H=(C=(N=e.deviceId)!==null&&N!==void 0?N:f.deviceId)!==null&&C!==void 0?C:s?.deviceId)!==null&&H!==void 0?H:u.deviceId)!==null&&te!==void 0?te:Y(),y=(z=s?.lastEventId)!==null&&z!==void 0?z:u.lastEventId,m=(re=s?.lastEventTime)!==null&&re!==void 0?re:u.lastEventTime,E=(_=(ue=e.optOut)!==null&&ue!==void 0?ue:s?.optOut)!==null&&_!==void 0?_:u.optOut,g=(Ye=s?.sessionId)!==null&&Ye!==void 0?Ye:u.sessionId,b=(He=(Xe=e.userId)!==null&&Xe!==void 0?Xe:s?.userId)!==null&&He!==void 0?He:u.userId,r.previousSessionDeviceId=(ze=s?.deviceId)!==null&&ze!==void 0?ze:u.deviceId,r.previousSessionUserId=(Ze=s?.userId)!==null&&Ze!==void 0?Ze:u.userId,O={ipAddress:(et=(Je=e.trackingOptions)===null||Je===void 0?void 0:Je.ipAddress)!==null&&et!==void 0?et:!0,language:(rt=(tt=e.trackingOptions)===null||tt===void 0?void 0:tt.language)!==null&&rt!==void 0?rt:!0,platform:(it=(nt=e.trackingOptions)===null||nt===void 0?void 0:nt.platform)!==null&&it!==void 0?it:!0},[2,new bn(t,e.appVersion,d,i,e.defaultTracking,h,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,n,e.ingestionMetadata,e.instanceName,y,m,e.loggerProvider,e.logLevel,e.minIdLength,E,e.partnerId,e.plan,e.serverUrl,e.serverZone,g,e.sessionTimeout,e.storageProvider,O,e.transport,e.useBatch,b)]}})})},In=function(t,e){switch(t===void 0&&(t=Ie),e===void 0&&(e={}),t){case"localStorage":return new Nt;case"sessionStorage":return new Dr;case"none":return new Ue;case"cookie":default:return new he(v(v({},e),{expirationDays:e.expiration}))}},jt=function(t){return t==="xhr"?new Lr:t==="beacon"?new Or:new kt},wn=function(t){return l(void 0,void 0,void 0,function(){var e,r,n,i,o,o,a,c,d,u;return p(this,function(s){switch(s.label){case 0:return[4,new he().isEnabled()];case 1:if(!s.sent()||!t&&typeof location>"u")return[2,""];for(e=t??location.hostname,r=e.split("."),n=[],i="AMP_TLDTEST",o=r.length-2;o>=0;--o)n.push(r.slice(o).join("."));o=0,s.label=2;case 2:return o<n.length?(a=n[o],c={domain:"."+a},d=new he(c),[4,d.set(i,1)]):[3,7];case 3:return s.sent(),[4,d.get(i)];case 4:return u=s.sent(),u?[4,d.remove(i)]:[3,6];case 5:return s.sent(),[2,"."+a];case 6:return o++,[3,2];case 7:return[2,""]}})})};var Kr=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[ne,e,t.substring(0,r)].filter(Boolean).join("_")},$r=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},Wr=function(t,e,r){var n=t.referrer,i=t.referring_domain,o=de(t,["referrer","referring_domain"]),a=e||{},c=a.referrer,d=a.referring_domain,u=de(a,["referrer","referring_domain"]);if(Tn(r.excludeReferrers,t.referring_domain))return!1;var s=JSON.stringify(o)!==JSON.stringify(u),f=$r(i||"")!==$r(d||"");return!e||s||f},Tn=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(r){return r instanceof RegExp?r.test(e):r===e})},Qr=function(t,e){var r=v(v({},oe),t),n=Object.entries(r).reduce(function(i,o){var a,c=x(o,2),d=c[0],u=c[1];return i.setOnce("initial_".concat(d),(a=u??e.initialEmptyValue)!==null&&a!==void 0?a:"EMPTY"),u?i.set(d,u):i.unset(d)},new G);return fe(n)},Yr=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]};var qt=function(t){var e=this;t===void 0&&(t={});var r={name:"@amplitude/plugin-web-attribution-browser",type:"before",setup:function(n,i){var o;return l(this,void 0,void 0,function(){var a,c,d,u,s,f,h;return p(this,function(y){switch(y.label){case 0:return a=v({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:Yr((o=n.cookieOptions)===null||o===void 0?void 0:o.domain)},t),n.loggerProvider.log("Installing @amplitude/plugin-web-attribution-browser."),c=n.cookieStorage,d=Kr(n.apiKey,"MKTG"),[4,Promise.all([new ve().parse(),c.get(d)])];case 1:return u=x.apply(void 0,[y.sent(),2]),s=u[0],f=u[1],Wr(s,f,a)&&(a.resetSessionOnNewCampaign&&(i.setSessionId(Date.now()),n.loggerProvider.log("Created a new session for new campaign.")),n.loggerProvider.log("Tracking attribution."),h=Qr(s,a),i.track(h),c.set(d,s)),[2]}})})},execute:function(n){return l(e,void 0,void 0,function(){return p(this,function(i){return[2,n]})})}};return r};var Xr=function(t){var e={};for(var r in t){var n=t[r];n&&(e[r]=n)}return e};var we=function(t){t===void 0&&(t={});var e,r=M(),n=void 0,i,o=function(){return l(void 0,void 0,void 0,function(){var f,h,y;return p(this,function(m){switch(m.label){case 0:return h={event_type:(y=t.eventType)!==null&&y!==void 0?y:"[Amplitude] Page Viewed"},f=[{}],[4,xn()];case 1:return[2,(h.event_properties=v.apply(void 0,[v.apply(void 0,f.concat([m.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":typeof location<"u"&&location.href||"","[Amplitude] Page Path":typeof location<"u"&&location.pathname||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":typeof location<"u"&&location.href.split("?")[0]||""}]),h)]}})})},a=function(){return typeof t.trackOn>"u"||typeof t.trackOn=="function"&&t.trackOn()},c=typeof location<"u"?location.href:null,d=function(){return l(void 0,void 0,void 0,function(){var f,h,y,m,E;return p(this,function(g){switch(g.label){case 0:return f=location.href,h=Pn(t.trackHistoryChanges,f,c||"")&&a(),c=f,h?(n?.log("Tracking page view event"),e!=null?[3,1]:(y=void 0,[3,3])):[3,4];case 1:return E=(m=e).track,[4,o()];case 2:y=E.apply(m,[g.sent()]),g.label=3;case 3:g.label=4;case 4:return[2]}})})},u=function(){d()},s={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(f,h){return l(void 0,void 0,void 0,function(){var y,m;return p(this,function(E){switch(E.label){case 0:return e=h,n=f.loggerProvider,n.log("Installing @amplitude/plugin-page-view-tracking-browser"),r&&(r.addEventListener("popstate",u),i=r.history.pushState,r.history.pushState=new Proxy(r.history.pushState,{apply:function(g,b,O){var I=x(O,3),U=I[0],F=I[1],w=I[2];g.apply(b,[U,F,w]),d()}})),a()?(n.log("Tracking page view event"),m=(y=e).track,[4,o()]):[3,2];case 1:m.apply(y,[E.sent()]),E.label=2;case 2:return[2]}})})},execute:function(f){return l(void 0,void 0,void 0,function(){var h;return p(this,function(y){switch(y.label){case 0:return t.trackOn==="attribution"&&Sn(f)?(n?.log("Enriching campaign event to page view event with campaign parameters"),[4,o()]):[3,2];case 1:h=y.sent(),f.event_type=h.event_type,f.event_properties=v(v({},f.event_properties),h.event_properties),y.label=2;case 2:return[2,f]}})})},teardown:function(){return l(void 0,void 0,void 0,function(){return p(this,function(f){return r&&(r.removeEventListener("popstate",u),i&&(r.history.pushState=i)),[2]})})}};return s},xn=function(){return l(void 0,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return t=Xr,[4,new ve().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},Sn=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,r=e[P.SET]||{},n=e[P.UNSET]||{},i=B(B([],x(Object.keys(r)),!1),x(Object.keys(n)),!1);return Object.keys(oe).every(function(o){return i.includes(o)})}return!1},Pn=function(t,e,r){switch(t){case"pathOnly":return e.split("?")[0]!==r.split("?")[0];default:return e!==r}};var Hr=function(){var t,e=[],r=function(u,s,f){u.addEventListener(s,f),e.push({element:u,type:s,handler:f})},n=function(){e.forEach(function(u){var s=u.element,f=u.type,h=u.handler;s?.removeEventListener(f,h)}),e=[]},i="@amplitude/plugin-form-interaction-tracking-browser",o="enrichment",a=function(u,s){return l(void 0,void 0,void 0,function(){var f,h;return p(this,function(y){return s?typeof document>"u"?[2]:(f=function(m){var E=!1;r(m,"change",function(){var g;E||s.track(Mt,(g={},g[Ge]=m.id,g[$e]=m.name,g[Ke]=m.action,g)),E=!0}),r(m,"submit",function(){var g,b;E||s.track(Mt,(g={},g[Ge]=m.id,g[$e]=m.name,g[Ke]=m.action,g)),s.track(Nr,(b={},b[Ge]=m.id,b[$e]=m.name,b[Ke]=m.action,b)),E=!1})},h=Array.from(document.getElementsByTagName("form")),h.forEach(f),typeof MutationObserver<"u"&&(t=new MutationObserver(function(m){m.forEach(function(E){E.addedNodes.forEach(function(g){g.nodeName==="FORM"&&f(g),"querySelectorAll"in g&&typeof g.querySelectorAll=="function"&&Array.from(g.querySelectorAll("form")).map(f)})})}),t.observe(document.body,{subtree:!0,childList:!0})),[2]):(u.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked."),[2])})})},c=function(u){return l(void 0,void 0,void 0,function(){return p(this,function(s){return[2,u]})})},d=function(){return l(void 0,void 0,void 0,function(){return p(this,function(u){return t?.disconnect(),n(),[2]})})};return{name:i,type:o,setup:a,execute:c,teardown:d}};var zr=function(){var t,e=[],r=function(u,s,f){u.addEventListener(s,f),e.push({element:u,type:s,handler:f})},n=function(){e.forEach(function(u){var s=u.element,f=u.type,h=u.handler;s?.removeEventListener(f,h)}),e=[]},i="@amplitude/plugin-file-download-tracking-browser",o="enrichment",a=function(u,s){return l(void 0,void 0,void 0,function(){var f,h,y;return p(this,function(m){return s?typeof document>"u"?[2]:(f=function(E){var g;try{g=new URL(E.href,window.location.href)}catch{return}var b=h.exec(g.href),O=b?.[1];O&&r(E,"click",function(){var I;O&&s.track(Ur,(I={},I[Mr]=O,I[Fr]=g.pathname,I[Vr]=E.id,I[jr]=E.text,I[qr]=E.href,I))})},h=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/,y=Array.from(document.getElementsByTagName("a")),y.forEach(f),typeof MutationObserver<"u"&&(t=new MutationObserver(function(E){E.forEach(function(g){g.addedNodes.forEach(function(b){b.nodeName==="A"&&f(b),"querySelectorAll"in b&&typeof b.querySelectorAll=="function"&&Array.from(b.querySelectorAll("a")).map(f)})})}),t.observe(document.body,{subtree:!0,childList:!0})),[2]):(u.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked."),[2])})})},c=function(u){return l(void 0,void 0,void 0,function(){return p(this,function(s){return[2,u]})})},d=function(){return l(void 0,void 0,void 0,function(){return p(this,function(u){return t?.disconnect(),n(),[2]})})};return{name:i,type:o,setup:a,execute:c,teardown:d}};var Zr=!1,Jr=function(t){if(!Zr){var e=[je(t.defaultTracking)?"Page Views":"",Ee(t.defaultTracking)?"Sessions":"",ye(t.defaultTracking)?"File Downloads":"",_e(t.defaultTracking)?"Form Interactions":""].filter(Boolean),r=e.join(", ");if(e.length){var n="Your Amplitude instance is configured to track ".concat(r,". Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.");t.loggerProvider.log(n),t.logLevel<L.Verbose&&console.log(n)}Zr=!0}};var en=function(t){j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(r,n,i){r===void 0&&(r="");var o,a;return arguments.length>2?(o=n,a=i):typeof n=="string"?(o=n,a=void 0):(o=n?.userId,a=n),q(this._init(v(v({},a),{userId:o,apiKey:r})))},e.prototype._init=function(r){var n,i;return l(this,void 0,void 0,function(){var o,a,c,d,u=this;return p(this,function(s){switch(s.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,Gr(r.apiKey,r,this)]);case 1:return o=s.sent(),[4,t.prototype._init.call(this,o)];case 2:return s.sent(),this.setSessionId((i=(n=r.sessionId)!==null&&n!==void 0?n:this.config.sessionId)!==null&&i!==void 0?i:Date.now()),a=ee(r.instanceName),a.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),[4,this.add(new ht).promise];case 3:return s.sent(),[4,this.add(new Rr).promise];case 4:return s.sent(),[4,this.add(new Dt).promise];case 5:return s.sent(),Jr(this.config),ye(this.config.defaultTracking)?[4,this.add(zr()).promise]:[3,7];case 6:s.sent(),s.label=7;case 7:return _e(this.config.defaultTracking)?[4,this.add(Hr()).promise]:[3,9];case 8:s.sent(),s.label=9;case 9:return Ve(this.config.defaultTracking)?(c=Ct(this.config),d=qt(c),[4,this.add(d).promise]):[3,11];case 10:s.sent(),s.label=11;case 11:return[4,this.add(we(Ot(this.config))).promise];case 12:return s.sent(),this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 13:return s.sent(),a.eventBridge.setEventReceiver(function(f){u.track(f.eventType,f.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.userId},e.prototype.setUserId=function(r){if(!this.config){this.q.push(this.setUserId.bind(this,r));return}(r!==this.config.userId||r===void 0)&&(this.config.userId=r,At(r,this.config.instanceName))},e.prototype.getDeviceId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.deviceId},e.prototype.setDeviceId=function(r){if(!this.config){this.q.push(this.setDeviceId.bind(this,r));return}this.config.deviceId=r,Rt(r,this.config.instanceName)},e.prototype.reset=function(){this.setDeviceId(Y()),this.setUserId(void 0)},e.prototype.getSessionId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.sessionId},e.prototype.setSessionId=function(r){var n;if(!this.config){this.q.push(this.setSessionId.bind(this,r));return}if(r!==this.config.sessionId){var i=this.getSessionId(),o=this.config.lastEventTime,a=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1;this.config.sessionId=r,this.config.lastEventTime=void 0,Ee(this.config.defaultTracking)&&(i&&o&&this.track(Vt,void 0,{device_id:this.previousSessionDeviceId,event_id:++a,session_id:i,time:o+1,user_id:this.previousSessionUserId}),this.config.lastEventTime=this.config.sessionId,this.track(Ft,void 0,{event_id:++a,session_id:this.config.sessionId,time:this.config.lastEventTime})),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId}},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(r){if(!this.config){this.q.push(this.setTransport.bind(this,r));return}this.config.transportProvider=jt(r)},e.prototype.identify=function(r,n){if(qe(r)){var i=r._q;r._q=[],r=be(new G,i)}return n?.user_id&&this.setUserId(n.user_id),n?.device_id&&this.setDeviceId(n.device_id),t.prototype.identify.call(this,r,n)},e.prototype.groupIdentify=function(r,n,i,o){if(qe(i)){var a=i._q;i._q=[],i=be(new G,a)}return t.prototype.groupIdentify.call(this,r,n,i,o)},e.prototype.revenue=function(r,n){if(qe(r)){var i=r._q;r._q=[],r=be(new le,i)}return t.prototype.revenue.call(this,r,n)},e.prototype.process=function(r){return l(this,void 0,void 0,function(){var n,i,o;return p(this,function(a){return n=Date.now(),i=this.config.lastEventTime||Date.now(),o=n-i,r.event_type!==Ft&&r.event_type!==Vt&&(!r.session_id||r.session_id===this.getSessionId())&&o>this.config.sessionTimeout&&this.setSessionId(n),[2,t.prototype.process.call(this,r)]})})},e}(lt);var Bt=function(){var t=new en;return{init:R(t.init.bind(t),"init",k(t),A(t,["config"])),add:R(t.add.bind(t),"add",k(t),A(t,["config.apiKey","timeline.plugins"])),remove:R(t.remove.bind(t),"remove",k(t),A(t,["config.apiKey","timeline.plugins"])),track:R(t.track.bind(t),"track",k(t),A(t,["config.apiKey","timeline.queue.length"])),logEvent:R(t.logEvent.bind(t),"logEvent",k(t),A(t,["config.apiKey","timeline.queue.length"])),identify:R(t.identify.bind(t),"identify",k(t),A(t,["config.apiKey","timeline.queue.length"])),groupIdentify:R(t.groupIdentify.bind(t),"groupIdentify",k(t),A(t,["config.apiKey","timeline.queue.length"])),setGroup:R(t.setGroup.bind(t),"setGroup",k(t),A(t,["config.apiKey","timeline.queue.length"])),revenue:R(t.revenue.bind(t),"revenue",k(t),A(t,["config.apiKey","timeline.queue.length"])),flush:R(t.flush.bind(t),"flush",k(t),A(t,["config.apiKey","timeline.queue.length"])),getUserId:R(t.getUserId.bind(t),"getUserId",k(t),A(t,["config","config.userId"])),setUserId:R(t.setUserId.bind(t),"setUserId",k(t),A(t,["config","config.userId"])),getDeviceId:R(t.getDeviceId.bind(t),"getDeviceId",k(t),A(t,["config","config.deviceId"])),setDeviceId:R(t.setDeviceId.bind(t),"setDeviceId",k(t),A(t,["config","config.deviceId"])),reset:R(t.reset.bind(t),"reset",k(t),A(t,["config","config.userId","config.deviceId"])),getSessionId:R(t.getSessionId.bind(t),"getSessionId",k(t),A(t,["config"])),setSessionId:R(t.setSessionId.bind(t),"setSessionId",k(t),A(t,["config"])),extendSession:R(t.extendSession.bind(t),"extendSession",k(t),A(t,["config"])),setOptOut:R(t.setOptOut.bind(t),"setOptOut",k(t),A(t,["config"])),setTransport:R(t.setTransport.bind(t),"setTransport",k(t),A(t,["config"]))}},D=Bt();var Gt=D.add,kn=D.extendSession,An=D.flush,Rn=D.getDeviceId,Dn=D.getSessionId,Ln=D.getUserId,On=D.groupIdentify,$t=D.identify,We=D.init,Cn=D.logEvent,Nn=D.remove,Un=D.reset,Mn=D.revenue,Fn=D.setDeviceId,Vn=D.setGroup,jn=D.setOptOut,qn=D.setSessionId,Bn=D.setTransport,Kt=D.setUserId,Wt=D.track;var Qe=class t extends V{static{this.providerName="amplitude"}init(r,n={},i,o={}){V.logAction("INIT",`[${t.providerName}]`,r),this.saveOptions(n),Gt(we({trackOn:()=>!0,trackHistoryChanges:"all"})),i?We(r,i,o):We(r,o)}ready(){return!!Qt}pageView(r){V.logAction("PAGE",`[${t.providerName}]`,r,"(done by plugin)")}track(r,n,i){let o=this.getTrackEventName(r);V.logAction("TRACK",`[${t.providerName}]`,o,n),Wt(o,n),typeof i=="function"&&i()}identify(r,n={}){V.logAction("IDENTIFY",`[${t.providerName}]`,r,n),Kt(r);let i=new G;Object.keys(n).forEach(o=>i.set(o,n[o])),$t(i)}};var Gn=new Ae([Re,Qe]);window.t3musketeers=Gn;})();
