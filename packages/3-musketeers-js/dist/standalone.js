(()=>{var B=Object.create;var v=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var W=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var K=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of $(t))!G.call(e,s)&&s!==r&&v(e,s,{get:()=>t[s],enumerable:!(n=H(t,s))||n.enumerable});return e};var q=(e,t,r)=>(r=e!=null?B(F(e)):{},K(t||!e||!e.__esModule?v(r,"default",{value:e,enumerable:!0}):r,e));var I=W((oe,N)=>{"use strict";N.exports=J;function g(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function J(e){if(e=e||{},e.circles)return U(e);let t=new Map;if(t.set(Date,o=>new Date(o)),t.set(Map,(o,u)=>new Map(n(Array.from(o),u))),t.set(Set,(o,u)=>new Set(n(Array.from(o),u))),e.constructorHandlers)for(let o of e.constructorHandlers)t.set(o[0],o[1]);let r=null;return e.proto?l:s;function n(o,u){let i=Object.keys(o),c=new Array(i.length);for(let f=0;f<i.length;f++){let a=i[f],d=o[a];typeof d!="object"||d===null?c[a]=d:d.constructor!==Object&&(r=t.get(d.constructor))?c[a]=r(d,u):ArrayBuffer.isView(d)?c[a]=g(d):c[a]=u(d)}return c}function s(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,s);if(o.constructor!==Object&&(r=t.get(o.constructor)))return r(o,s);let u={};for(let i in o){if(Object.hasOwnProperty.call(o,i)===!1)continue;let c=o[i];typeof c!="object"||c===null?u[i]=c:c.constructor!==Object&&(r=t.get(c.constructor))?u[i]=r(c,s):ArrayBuffer.isView(c)?u[i]=g(c):u[i]=s(c)}return u}function l(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,l);if(o.constructor!==Object&&(r=t.get(o.constructor)))return r(o,l);let u={};for(let i in o){let c=o[i];typeof c!="object"||c===null?u[i]=c:c.constructor!==Object&&(r=t.get(c.constructor))?u[i]=r(c,l):ArrayBuffer.isView(c)?u[i]=g(c):u[i]=l(c)}return u}}function U(e){let t=[],r=[],n=new Map;if(n.set(Date,i=>new Date(i)),n.set(Map,(i,c)=>new Map(l(Array.from(i),c))),n.set(Set,(i,c)=>new Set(l(Array.from(i),c))),e.constructorHandlers)for(let i of e.constructorHandlers)n.set(i[0],i[1]);let s=null;return e.proto?u:o;function l(i,c){let f=Object.keys(i),a=new Array(f.length);for(let d=0;d<f.length;d++){let y=f[d],p=i[y];if(typeof p!="object"||p===null)a[y]=p;else if(p.constructor!==Object&&(s=n.get(p.constructor)))a[y]=s(p,c);else if(ArrayBuffer.isView(p))a[y]=g(p);else{let L=t.indexOf(p);L!==-1?a[y]=r[L]:a[y]=c(p)}}return a}function o(i){if(typeof i!="object"||i===null)return i;if(Array.isArray(i))return l(i,o);if(i.constructor!==Object&&(s=n.get(i.constructor)))return s(i,o);let c={};t.push(i),r.push(c);for(let f in i){if(Object.hasOwnProperty.call(i,f)===!1)continue;let a=i[f];if(typeof a!="object"||a===null)c[f]=a;else if(a.constructor!==Object&&(s=n.get(a.constructor)))c[f]=s(a,o);else if(ArrayBuffer.isView(a))c[f]=g(a);else{let d=t.indexOf(a);d!==-1?c[f]=r[d]:c[f]=o(a)}}return t.pop(),r.pop(),c}function u(i){if(typeof i!="object"||i===null)return i;if(Array.isArray(i))return l(i,u);if(i.constructor!==Object&&(s=n.get(i.constructor)))return s(i,u);let c={};t.push(i),r.push(c);for(let f in i){let a=i[f];if(typeof a!="object"||a===null)c[f]=a;else if(a.constructor!==Object&&(s=n.get(a.constructor)))c[f]=s(a,u);else if(ArrayBuffer.isView(a))c[f]=g(a);else{let d=t.indexOf(a);d!==-1?c[f]=r[d]:c[f]=u(a)}}return t.pop(),r.pop(),c}}});var M=!1;function R(e){M=e}var h={info:(...e)=>A(1,...e),warn:(...e)=>A(2,...e),error:(...e)=>A(3,...e)};function A(e,...t){if(M){let r=["\u{1F93A} %c[3-musketeers]"];switch(e){case 1:r.push("color: #06989A; font-weight: 600"),console.log(...r,...t);break;case 2:r.push("color: #C4A000; font-weight: 600"),console.warn(...r,...t);break;case 3:r.push("color: #CC0000; font-weight: 600"),console.error(...r,...t);break;default:break}}}var Q=/\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)]/;function O(e){if(e==null)return String(e);let t=Q.exec(Object.prototype.toString.call(Object(e)));return t?t[1].toLowerCase():"object"}function w(e){return O(e)==="array"}function T(e){return O(e)==="string"}function m(e,t){return Object.prototype.hasOwnProperty.call(Object(e),t)}function _(e){if(!e||O(e)!="object"||e.nodeType||e==e.window)return!1;try{if(e.constructor&&!m(e,"constructor")&&!m(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}let t;for(t in e);return t===void 0||m(e,t)}function C(e){return O(e)==="arguments"}function b(e,t){let r=!e._clear;for(let n in e)if(m(e,n)){let s=e[n];w(s)&&r?(w(t[n])||(t[n]=[]),b(s,t[n])):_(s)&&r?(_(t[n])||(t[n]={}),b(s,t[n])):t[n]=s}delete t._clear}function j(e,t){let r={},n=r,s=e.split(".");for(let l=0;l<s.length-1;l++)n=n[s[l]]={};return n[s[s.length-1]]=t,r}function Y(e){return{set:(t,r)=>{b(j(t,r),e.model_)},get:t=>e.get(t)}}function z(e,t){T(e[0])||h.warn(`Error processing command, no command was run. The first argument must be of type string, but was of type ${typeof e[0]}.
The command run was ${e}`);let r=e[0].split("."),n=r.pop(),s=e.slice(1),l=t;for(let o=0;o<r.length;o++){if(l[r[o]]===void 0){h.warn(`Error processing command, no command was run as the object at ${r} was undefined.
The command run was ${e}`);return}l=l[r[o]]}try{l[n](...s)}catch{h.error(`An exception was thrown by the method ${n}, so no command was run.
The method was called on the data layer object at the location ${r}.`)}}var k=class{constructor(t,r={}){this.dataLayer_=t,this.listener_=r.listener||(()=>{}),this.listenToPast_=!!r.listenToPast,this.processed_=!1,this.executingListener_=!1,this.model_={},this.unprocessed_=[],this.abstractModelInterface_=Y(this),r.debugMode&&R(!0);let n=this.dataLayer_.push;this.dataLayer_.push=(...s)=>{let l=[].slice.call(s,0),o=n.apply(this.dataLayer_,l);return this.processStates_(l),o},r.processNow&&this.process()}process(){this.processed_&&h.error("Process has already been run. This method should only run a single time to prepare the helper."),this.processed_=!0;let t=this.dataLayer_.length;for(let r=0;r<t;r++)this.processStates_([this.dataLayer_[r]],!this.listenToPast_)}get(t){let r=this.model_,n=t.split(".");for(let s=0;s<n.length;s++){if(r[n[s]]===void 0)return;r=r[n[s]]}return r}processStates_(t,r=!1){if(this.processed_&&(this.unprocessed_.push(...t),!this.executingListener_))for(;this.unprocessed_.length>0;){let n=this.unprocessed_.shift();if(w(n))z(n,this.model_);else if(!C(n))if(typeof n=="function")try{n.call(this.abstractModelInterface_)}catch(s){h.error(`An exception was thrown when running the method ${n}, execution was skipped.`,s)}else if(_(n))for(let s in n)b(j(s,n[s]),this.model_);else continue;r||(this.executingListener_=!0,this.listener_(this.model_,n),this.executingListener_=!1)}}};var S=q(I());function x(e){return(0,S.default)()(e)}function D(e,t){e.forEach(r=>{let[n,s]=t,l=x(s);r.pageView(n,l)})}function E(e,t){e.forEach(r=>{let[n,s,l]=t,o=x(s);r.track(n,o,l)})}function V(e,t){e.forEach(r=>{let[n,s]=t,l=x(s);r.identify(n,l)})}var P=class{constructor(t=[]){this.listener=(t,r)=>{let n=[...r].splice(0,r.length);switch(n.shift()){case"init":let l=n.shift(),o=this.getProviderInstance(l);if(!o){h.error(`Provider '${l}' not found`);return}this.providers.push(o),o.init(...n);break;case"track":E(this.providers,n);break;case"page":D(this.providers,n);break;case"identify":V(this.providers,n);break}};this.availableProviders=t,this.providers=[];let r=window.dataQueue||[];this.helper=new k(r,{listener:this.listener,listenToPast:!0,processNow:!0,debugMode:!0})}getProviderInstance(t){let r=this.availableProviders.find(n=>n.providerName===t);if(r)return new r}};var X=new P;window.t3musketeers=X;})();
