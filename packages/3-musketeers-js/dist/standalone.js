(()=>{var w=!1;function b(e){w=e}var c={info:(...e)=>y(1,...e),warn:(...e)=>y(2,...e),error:(...e)=>y(3,...e)};function y(e,...t){if(w){let r=["\u{1F93A} %c[3-musketeers]"];switch(e){case 1:r.push("color: #06989A; font-weight: 600"),console.log(...r,...t);break;case 2:r.push("color: #C4A000; font-weight: 600"),console.warn(...r,...t);break;case 3:r.push("color: #CC0000; font-weight: 600"),console.error(...r,...t);break;default:break}}}var R=/\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)]/;function f(e){if(e==null)return String(e);let t=R.exec(Object.prototype.toString.call(Object(e)));return t?t[1].toLowerCase():"object"}function d(e){return f(e)==="array"}function _(e){return f(e)==="string"}function u(e,t){return Object.prototype.hasOwnProperty.call(Object(e),t)}function p(e){if(!e||f(e)!="object"||e.nodeType||e==e.window)return!1;try{if(e.constructor&&!u(e,"constructor")&&!u(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}let t;for(t in e);return t===void 0||u(e,t)}function k(e){return f(e)==="arguments"}function l(e,t){let r=!e._clear;for(let n in e)if(u(e,n)){let s=e[n];d(s)&&r?(d(t[n])||(t[n]=[]),l(s,t[n])):p(s)&&r?(p(t[n])||(t[n]={}),l(s,t[n])):t[n]=s}delete t._clear}function m(e,t){let r={},n=r,s=e.split(".");for(let o=0;o<s.length-1;o++)n=n[s[o]]={};return n[s[s.length-1]]=t,r}function v(e){return{set:(t,r)=>{l(m(t,r),e.model_)},get:t=>e.get(t)}}function T(e,t){_(e[0])||c.warn(`Error processing command, no command was run. The first argument must be of type string, but was of type ${typeof e[0]}.
The command run was ${e}`);let r=e[0].split("."),n=r.pop(),s=e.slice(1),o=t;for(let i=0;i<r.length;i++){if(o[r[i]]===void 0){c.warn(`Error processing command, no command was run as the object at ${r} was undefined.
The command run was ${e}`);return}o=o[r[i]]}try{o[n](...s)}catch{c.error(`An exception was thrown by the method ${n}, so no command was run.
The method was called on the data layer object at the location ${r}.`)}}var h=class{constructor(t,r={}){this.dataLayer_=t,this.listener_=r.listener||(()=>{}),this.listenToPast_=!!r.listenToPast,this.processed_=!1,this.executingListener_=!1,this.model_={},this.unprocessed_=[],this.abstractModelInterface_=v(this),r.debugMode&&b(!0);let n=this.dataLayer_.push;this.dataLayer_.push=(...s)=>{let o=[].slice.call(s,0),i=n.apply(this.dataLayer_,o);return this.processStates_(o),i},r.processNow&&this.process()}process(){this.processed_&&c.error("Process has already been run. This method should only run a single time to prepare the helper."),this.processed_=!0;let t=this.dataLayer_.length;for(let r=0;r<t;r++)this.processStates_([this.dataLayer_[r]],!this.listenToPast_)}get(t){let r=this.model_,n=t.split(".");for(let s=0;s<n.length;s++){if(r[n[s]]===void 0)return;r=r[n[s]]}return r}processStates_(t,r=!1){if(this.processed_&&(this.unprocessed_.push(...t),!this.executingListener_))for(;this.unprocessed_.length>0;){let n=this.unprocessed_.shift();if(d(n))T(n,this.model_);else if(!k(n))if(typeof n=="function")try{n.call(this.abstractModelInterface_)}catch(s){c.error(`An exception was thrown when running the method ${n}, execution was skipped.`,s)}else if(p(n))for(let s in n)l(m(s,n[s]),this.model_);else continue;r||(this.executingListener_=!0,this.listener_(this.model_,n),this.executingListener_=!1)}}};function a(e){let t=e,r={}.toString.call(e).slice(8,-1);if(r==="Set")return new Set([...e].map(n=>a(n)));if(r==="Map")return new Map([...e].map(([n,s])=>[a(n),a(s)]));if(r==="Date")return new Date(e.getTime());if(r==="RegExp")return RegExp(e.source,O(e));if(r==="Array"||r==="Object"){t=Array.isArray(e)?[]:{};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=a(e[n]))}return t}function O(e){if(typeof e.flags=="string")return e.flags;{let t=[];return e.global&&t.push("g"),e.ignoreCase&&t.push("i"),e.multiline&&t.push("m"),e.sticky&&t.push("y"),e.unicode&&t.push("u"),t.join("")}}function x(e,t){e.forEach(r=>{let[n,s]=t,o=a(s);r.pageView(n,o)})}function L(e,t){e.forEach(r=>{let[n,s,o]=t,i=a(s);r.track(n,i,o)})}function P(e,t){e.forEach(r=>{let[n,s]=t,o=a(s);r.identify(n,o)})}var g=class{constructor(t=[]){this.listener=(t,r)=>{let n=[...r].splice(0,r.length);switch(n.shift()){case"init":let o=n.shift(),i=this.getProviderInstance(o);if(!i){c.error(`Provider '${o}' not found`);return}this.providers.push(i),i.init(...n);break;case"track":L(this.providers,n);break;case"page":x(this.providers,n);break;case"identify":P(this.providers,n);break}};this.availableProviders=t,this.providers=[];let r=window.dataQueue||[];this.helper=new h(r,{listener:this.listener,listenToPast:!0,processNow:!0,debugMode:!0})}getProviderInstance(t){let r=this.availableProviders.find(n=>n.providerName===t);if(r)return new r}};var A=new g;window.t3musketeers=A;})();
