(()=>{var C=!1;function A(e){C=e}var s={info:(...e)=>w(1,...e),warn:(...e)=>w(2,...e),error:(...e)=>w(3,...e)};function w(e,...r){if(C){let t=["\u{1F93A} %c[3-musketeers]"];switch(e){case 1:t.push("color: #06989A; font-weight: 600"),console.log(...t,...r);break;case 2:t.push("color: #C4A000; font-weight: 600"),console.warn(...t,...r);break;case 3:t.push("color: #CC0000; font-weight: 600"),console.error(...t,...r);break;default:break}}}var G=/\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)]/;function d(e){if(e==null)return String(e);let r=G.exec(Object.prototype.toString.call(Object(e)));return r?r[1].toLowerCase():"object"}function p(e){return d(e)==="array"}function k(e){return d(e)==="string"}function f(e,r){return Object.prototype.hasOwnProperty.call(Object(e),r)}function l(e){if(!e||d(e)!="object"||e.nodeType||e==e.window)return!1;try{if(e.constructor&&!f(e,"constructor")&&!f(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}let r;for(r in e);return r===void 0||f(e,r)}function x(e){return d(e)==="arguments"}function u(e,r){let t=!e._clear;for(let n in e)if(f(e,n)){let o=e[n];p(o)&&t?(p(r[n])||(r[n]=[]),u(o,r[n])):l(o)&&t?(l(r[n])||(r[n]={}),u(o,r[n])):r[n]=o}delete r._clear}function _(e,r){let t={},n=t,o=e.split(".");for(let c=0;c<o.length-1;c++)n=n[o[c]]={};return n[o[o.length-1]]=r,t}function H(e){return{set:(r,t)=>{u(_(r,t),e.model_)},get:r=>e.get(r)}}function z(e,r){k(e[0])||s.warn(`Error processing command, no command was run. The first argument must be of type string, but was of type ${typeof e[0]}.
The command run was ${e}`);let t=e[0].split("."),n=t.pop(),o=e.slice(1),c=r;for(let i=0;i<t.length;i++){if(c[t[i]]===void 0){s.warn(`Error processing command, no command was run as the object at ${t} was undefined.
The command run was ${e}`);return}c=c[t[i]]}try{c[n](...o)}catch{s.error(`An exception was thrown by the method ${n}, so no command was run.
The method was called on the data layer object at the location ${t}.`)}}var y=class{constructor(r,t={}){this.dataLayer_=r,this.listener_=t.listener||(()=>{}),this.listenToPast_=!!t.listenToPast,this.processed_=!1,this.executingListener_=!1,this.model_={},this.unprocessed_=[],this.abstractModelInterface_=H(this),t.debugMode&&A(!0);let n=this.dataLayer_.push;this.dataLayer_.push=(...o)=>{let c=[].slice.call(o,0),i=n.apply(this.dataLayer_,c);return this.processStates_(c),i},t.processNow&&this.process()}process(){this.processed_&&s.error("Process has already been run. This method should only run a single time to prepare the helper."),this.processed_=!0;let r=this.dataLayer_.length;for(let t=0;t<r;t++)this.processStates_([this.dataLayer_[t]],!this.listenToPast_)}get(r){let t=this.model_,n=r.split(".");for(let o=0;o<n.length;o++){if(t[n[o]]===void 0)return;t=t[n[o]]}return t}processStates_(r,t=!1){if(this.processed_&&(this.unprocessed_.push(...r),!this.executingListener_))for(;this.unprocessed_.length>0;){let n=this.unprocessed_.shift();if(p(n))z(n,this.model_);else if(!x(n))if(typeof n=="function")try{n.call(this.abstractModelInterface_)}catch(o){s.error(`An exception was thrown when running the method ${n}, execution was skipped.`,o)}else if(l(n))for(let o in n)u(_(o,n[o]),this.model_);else continue;t||(this.executingListener_=!0,this.listener_(this.model_,n),this.executingListener_=!1)}}};var K=Function.prototype.toString,v=Object.create,Y=Object.prototype.toString,q=function(){function e(){this._keys=[],this._values=[]}return e.prototype.has=function(r){return!!~this._keys.indexOf(r)},e.prototype.get=function(r){return this._values[this._keys.indexOf(r)]},e.prototype.set=function(r,t){this._keys.push(r),this._values.push(t)},e}();function Q(){return new q}function J(){return new WeakMap}var X=typeof WeakMap<"u"?J:Q;function P(e){if(!e)return v(null);var r=e.constructor;if(r===Object)return e===Object.prototype?{}:v(e);if(r&&~K.call(r).indexOf("[native code]"))try{return new r}catch{}return v(e)}function Z(e){var r="";return e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.unicode&&(r+="u"),e.sticky&&(r+="y"),r}function ee(e){return e.flags}var re=/test/g.flags==="g"?ee:Z;function T(e){var r=Y.call(e);return r.substring(8,r.length-1)}function te(e){return e[Symbol.toStringTag]||T(e)}var ne=typeof Symbol<"u"?te:T,oe=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,L=Object.getOwnPropertySymbols,M=Object.prototype,R=M.hasOwnProperty,ae=M.propertyIsEnumerable,I=typeof L=="function";function ce(e){return j(e).concat(L(e))}var se=I?ce:j;function h(e,r,t){for(var n=se(e),o=0,c=n.length,i=void 0,a=void 0;o<c;++o)if(i=n[o],!(i==="callee"||i==="caller")){if(a=ie(e,i),!a){r[i]=t.copier(e[i],t);continue}!a.get&&!a.set&&(a.value=t.copier(a.value,t));try{oe(r,i,a)}catch{r[i]=a.value}}return r}function ue(e,r){var t=new r.Constructor;r.cache.set(e,t);for(var n=0,o=e.length;n<o;++n)t[n]=r.copier(e[n],r);return t}function fe(e,r){var t=new r.Constructor;return r.cache.set(e,t),h(e,t,r)}function E(e,r){return e.slice(0)}function pe(e,r){return e.slice(0,e.size,e.type)}function le(e,r){return new r.Constructor(E(e.buffer))}function de(e,r){return new r.Constructor(e.getTime())}function N(e,r){var t=new r.Constructor;return r.cache.set(e,t),e.forEach(function(n,o){t.set(o,r.copier(n,r))}),t}function ye(e,r){return h(e,N(e,r),r)}function ge(e,r){var t=P(r.prototype);r.cache.set(e,t);for(var n in e)R.call(e,n)&&(t[n]=r.copier(e[n],r));return t}function he(e,r){var t=P(r.prototype);r.cache.set(e,t);for(var n in e)R.call(e,n)&&(t[n]=r.copier(e[n],r));for(var o=L(e),c=0,i=o.length,a=void 0;c<i;++c)a=o[c],ae.call(e,a)&&(t[a]=r.copier(e[a],r));return t}var be=I?he:ge;function me(e,r){var t=P(r.prototype);return r.cache.set(e,t),h(e,t,r)}function O(e,r){return new r.Constructor(e.valueOf())}function we(e,r){var t=new r.Constructor(e.source,re(e));return t.lastIndex=e.lastIndex,t}function g(e,r){return e}function D(e,r){var t=new r.Constructor;return r.cache.set(e,t),e.forEach(function(n){t.add(r.copier(n,r))}),t}function _e(e,r){return h(e,D(e,r),r)}var ve=Array.isArray,S=Object.assign,Oe=Object.getPrototypeOf||function(e){return e.__proto__},B={array:ue,arrayBuffer:E,blob:pe,dataView:le,date:de,error:g,map:N,object:be,regExp:we,set:D},Pe=S({},B,{array:fe,map:ye,object:me,set:_e});function Le(e){return{Arguments:e.object,Array:e.array,ArrayBuffer:e.arrayBuffer,Blob:e.blob,Boolean:O,DataView:e.dataView,Date:e.date,Error:e.error,Float32Array:e.arrayBuffer,Float64Array:e.arrayBuffer,Int8Array:e.arrayBuffer,Int16Array:e.arrayBuffer,Int32Array:e.arrayBuffer,Map:e.map,Number:O,Object:e.object,Promise:g,RegExp:e.regExp,Set:e.set,String:O,WeakMap:g,WeakSet:g,Uint8Array:e.arrayBuffer,Uint8ClampedArray:e.arrayBuffer,Uint16Array:e.arrayBuffer,Uint32Array:e.arrayBuffer,Uint64Array:e.arrayBuffer}}function F(e){var r=S({},B,e),t=Le(r),n=t.Array,o=t.Object;function c(i,a){if(a.prototype=a.Constructor=void 0,!i||typeof i!="object")return i;if(a.cache.has(i))return a.cache.get(i);if(a.prototype=Oe(i),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return o(i,a);if(ve(i))return n(i,a);var m=t[ne(i)];return m?m(i,a):typeof i.then=="function"?i:o(i,a)}return function(a){return c(a,{Constructor:void 0,cache:X(),copier:c,prototype:void 0})}}function Se(e){return F(S({},Pe,e))}var Me=Se({}),V=F({});function U(e,r){e.forEach(t=>{let[n,o]=r;t.pageView(n,o)})}function W(e,r){e.forEach(t=>{let[n,o,c]=r;t.track(n,o,c)})}function $(e,r){e.forEach(t=>{let[n,o]=r,c=V(o);t.identify(n,c)})}var b=class{constructor(r=[]){this.listener=(r,t)=>{let n=[...t].splice(0,t.length);switch(n.shift()){case"init":let c=n.shift(),i=this.getProviderInstance(c);if(!i){s.error(`Provider '${c}' not found`);return}this.providers.push(i),i.init(...n);break;case"track":W(this.providers,n);break;case"page":U(this.providers,n);break;case"identify":$(this.providers,n);break}};this.availableProviders=r,this.providers=[];let t=window.dataQueue||[];this.helper=new y(t,{listener:this.listener,listenToPast:!0,processNow:!0,debugMode:!0})}getProviderInstance(r){let t=this.availableProviders.find(n=>n.providerName===r);if(t)return new t}};var Ce=new b;window.t3musketeers=Ce;})();
