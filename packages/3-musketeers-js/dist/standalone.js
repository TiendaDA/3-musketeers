(()=>{var b=!1;function v(e){b=e}var a={info:(...e)=>m(1,...e),warn:(...e)=>m(2,...e),error:(...e)=>m(3,...e)};function m(e,...t){if(b){let r=["\u{1F93A} %c[3-musketeers]"];switch(e){case 1:r.push("color: #06989A; font-weight: 600"),console.log(...r,...t);break;case 2:r.push("color: #C4A000; font-weight: 600"),console.warn(...r,...t);break;case 3:r.push("color: #CC0000; font-weight: 600"),console.error(...r,...t);break;default:break}}}var R=/\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)]/;function u(e){if(e==null)return String(e);let t=R.exec(Object.prototype.toString.call(Object(e)));return t?t[1].toLowerCase():"object"}function p(e){return u(e)==="array"}function w(e){return u(e)==="string"}function d(e,t){return Object.prototype.hasOwnProperty.call(Object(e),t)}function l(e){if(!e||u(e)!="object"||e.nodeType||e==e.window)return!1;try{if(e.constructor&&!d(e,"constructor")&&!d(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}let t;for(t in e);return t===void 0||d(e,t)}function P(e){return u(e)==="arguments"}function c(e,t){let r=!e._clear;for(let n in e)if(d(e,n)){let s=e[n];p(s)&&r?(p(t[n])||(t[n]=[]),c(s,t[n])):l(s)&&r?(l(t[n])||(t[n]={}),c(s,t[n])):t[n]=s}delete t._clear}function y(e,t){let r={},n=r,s=e.split(".");for(let o=0;o<s.length-1;o++)n=n[s[o]]={};return n[s[s.length-1]]=t,r}function E(e){return{set:(t,r)=>{c(y(t,r),e.model_)},get:t=>e.get(t)}}function I(e,t){w(e[0])||a.warn(`Error processing command, no command was run. The first argument must be of type string, but was of type ${typeof e[0]}.
The command run was ${e}`);let r=e[0].split("."),n=r.pop(),s=e.slice(1),o=t;for(let i=0;i<r.length;i++){if(o[r[i]]===void 0){a.warn(`Error processing command, no command was run as the object at ${r} was undefined.
The command run was ${e}`);return}o=o[r[i]]}try{o[n](...s)}catch{a.error(`An exception was thrown by the method ${n}, so no command was run.
The method was called on the data layer object at the location ${r}.`)}}var f=class{constructor(t,r={}){this.dataLayer_=t,this.listener_=r.listener||(()=>{}),this.listenToPast_=!!r.listenToPast,this.processed_=!1,this.executingListener_=!1,this.model_={},this.unprocessed_=[],this.abstractModelInterface_=E(this),r.debugMode&&v(!0);let n=this.dataLayer_.push;this.dataLayer_.push=(...s)=>{let o=[].slice.call(s,0),i=n.apply(this.dataLayer_,o);return this.processStates_(o),i},r.processNow&&this.process()}process(){this.processed_&&a.error("Process has already been run. This method should only run a single time to prepare the helper."),this.processed_=!0;let t=this.dataLayer_.length;for(let r=0;r<t;r++)this.processStates_([this.dataLayer_[r]],!this.listenToPast_)}get(t){let r=this.model_,n=t.split(".");for(let s=0;s<n.length;s++){if(r[n[s]]===void 0)return;r=r[n[s]]}return r}processStates_(t,r=!1){if(this.processed_&&(this.unprocessed_.push(...t),!this.executingListener_))for(;this.unprocessed_.length>0;){let n=this.unprocessed_.shift();if(p(n))I(n,this.model_);else if(!P(n))if(typeof n=="function")try{n.call(this.abstractModelInterface_)}catch(s){a.error(`An exception was thrown when running the method ${n}, execution was skipped.`,s)}else if(l(n))for(let s in n)c(y(s,n[s]),this.model_);else continue;r||(this.executingListener_=!0,this.listener_(this.model_,n),this.executingListener_=!1)}}};var k=class{constructor(){this.providerName="provider"}static{this.providerName="provider"}static logAction(t,...r){a.info(`[${t}]`,...r)}saveOptions(t={}){t.mapTrackEvent&&(this.mapTrackEvent=t.mapTrackEvent)}getTrackEvent(t,r){return this.mapTrackEvent?this.mapTrackEvent(t,r):{eventName:t,params:r}}};function g(e,t){let r=e;return t&&Array.isArray(t)&&t.length>0&&(r=e.filter(n=>t.includes(n.providerName))),r}function _(e,t){let[r,n,s]=t;g(e,s).forEach(i=>{i.pageView(r,n)})}function x(e,t){let[r,n,s,o]=t;g(e,s).forEach(T=>{T.track(r,n,o)})}function L(e,t){let[r,n,s]=t;g(e,s).forEach(i=>{i.identify(r,n)})}var h=class{constructor(t=[]){this.listener=(t,r)=>{let n=[...r].splice(0,r.length);switch(n.shift()){case"init":let o=n.shift(),i=this.getProviderInstance(o);if(!i){a.error(`Provider '${o}' not found`);return}this.providers.push(i),i.init(...n);break;case"track":x(this.providers,n);break;case"page":_(this.providers,n);break;case"identify":L(this.providers,n);break}};this.availableProviders=t,this.providers=[];let r=window.dataQueue||[];this.helper=new f(r,{listener:this.listener,listenToPast:!0,processNow:!0,debugMode:!0})}getProviderInstance(t){let r=this.availableProviders.find(n=>n.providerName===t);if(r)return new r}};var O=new h;window.t3musketeers=O;})();
